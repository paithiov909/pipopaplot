% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sonify.R
\name{sonify}
\alias{sonify}
\title{Map note data to MIDI event timings and values}
\usage{
sonify(
  notes,
  phrase_len = 4,
  tpq = 480,
  pitch_range = c(27, 102),
  vel_range = c(60, 100),
  duration_range = c(16, 4),
  offset = 0.1
)
}
\arguments{
\item{notes}{A tibble containing columns
\code{x}, \code{y}, \code{channel}, \code{group}, \code{duration}, and \code{velocity}.
\code{channel} and \code{group} should be factors; other columns should be numeric.}

\item{phrase_len}{Length of the phrase in beats.}

\item{tpq}{Ticks per quarter note.}

\item{pitch_range}{Range of MIDI note numbers to map \code{y} onto.}

\item{vel_range}{Range of MIDI velocities to map \code{velocity} onto.}

\item{duration_range}{Range of note durations (in ticks) mapped from \code{duration}.
Default \code{c(16, 4)} (shorter to longer).}

\item{offset}{Padding fraction for mapping \code{x} values.}
}
\value{
A data frame with factor and integer columns:
\code{channel}, \code{group}, \code{tick_on}, \code{tick_off}, \code{pitch}, and \code{velocity}.
Suitable as input to \code{\link[=write_midi]{write_midi()}}.
}
\description{
\code{sonify()} transforms a notes tibble into a structured data frame of
note-on and note-off events that can be written to a Standard MIDI file
via \code{\link[=write_midi]{write_midi()}}.
}
\details{
Value scaling is handled by \code{\link[scales:rescale]{scales::rescale()}}, so the input value ranges
are arbitrary but must be finite.
Note that because of this rescaling behavior, a \code{velocity} value of \code{0}
will not be mapped to complete silence by default (i.e., the minimum input
value will still be mapped to the lower bound of \code{vel_range} rather than \code{0}).

Within each channel, duplicated timing values (\code{x}) are deduplicated
using \code{\link[dplyr:distinct]{dplyr::distinct()}}.
To produce simultaneous notes (like chords), you must assign different
\code{channel} values in advance.
}
